# ─────────────────────────────────────────────
# AI / LLM
# ─────────────────────────────────────────────
ANTHROPIC_API_KEY=                              # required
ANTHROPIC_MODEL_ID=claude-3-5-sonnet-latest
ANTHROPIC_SMALL_MODEL_ID=claude-3-5-haiku-latest
ANTHROPIC_TREND_MODEL_ID=claude-sonnet-4-6

OPENAI_API_KEY=                                 # required
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_EMBEDDING_MODEL_OVERRIDE=

# ─────────────────────────────────────────────
# Database
# ─────────────────────────────────────────────
SUPABASE_URL=                                   # required
SUPABASE_SERVICE_ROLE_KEY=                      # required
POSTGRES_DSN=                                   # required

# ─────────────────────────────────────────────
# GitHub delivery
# ─────────────────────────────────────────────
GITHUB_TOKEN=                                   # required
GITHUB_OWNER=                                   # required
GITHUB_REPO=                                    # required
GITHUB_DEFAULT_BRANCH=main

# ─────────────────────────────────────────────
# Report
# ─────────────────────────────────────────────
REPORT_TOPIC=
REPORT_ARTIFACTS_DIR=artifacts/reports

# ─────────────────────────────────────────────
# Ingestion – RSS
# ─────────────────────────────────────────────
RSS_FEEDS=
RSS_FEEDS_FILE=feeds/rss.md
RSS_FEED_TIMEOUT_S=10
RSS_FEED_RETRIES=2
RSS_FEED_BACKOFF_BASE_S=0.5
RSS_LATEST_LIMIT=10

# ─────────────────────────────────────────────
# Ingestion – YouTube
# ─────────────────────────────────────────────
YOUTUBE_CHANNELS=
YOUTUBE_CHANNELS_FILE=feeds/youtube.md
YOUTUBE_LATEST_LIMIT=10
YOUTUBE_TIMEOUT_S=12
TRANSCRIPT_API_KEY=                             # required
TRANSCRIPT_API_BASE_URL=https://api.transcriptapi.com

# ─────────────────────────────────────────────
# Processing & chunking
# ─────────────────────────────────────────────
CHUNK_WINDOW_SIZE=200
CHUNK_OVERLAP=40
EMBEDDING_BATCH_SIZE=64

# ─────────────────────────────────────────────
# Cost tracking (USD)
# ─────────────────────────────────────────────
EMBEDDING_COST_PER_MILLION_TOKENS_USD=0.02
SONNET_INPUT_COST_PER_MILLION_TOKENS_USD=3.0
SONNET_OUTPUT_COST_PER_MILLION_TOKENS_USD=15.0
OPUS_COST_MULTIPLIER=5

# ─────────────────────────────────────────────
# Delivery – Email
# ─────────────────────────────────────────────
DELIVERY_EMAIL_ENABLED=false
DELIVERY_EMAIL_PROVIDER=smtp          # smtp | sendgrid
DELIVERY_EMAIL_FROM=                            # required if DELIVERY_EMAIL_ENABLED=true
DELIVERY_EMAIL_TO=                              # required if DELIVERY_EMAIL_ENABLED=true

# SMTP
SMTP_HOST=                                      # required if DELIVERY_EMAIL_PROVIDER=smtp
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=true

# SendGrid (alternative to SMTP)
SENDGRID_API_KEY=                               # required if DELIVERY_EMAIL_PROVIDER=sendgrid

# ─────────────────────────────────────────────
# Delivery – Slack
# ─────────────────────────────────────────────
DELIVERY_SLACK_ENABLED=false
SLACK_WEBHOOK_URL=                              # required if DELIVERY_SLACK_ENABLED=true

# ─────────────────────────────────────────────
# Delivery control
# ─────────────────────────────────────────────
DELIVERY_DRY_RUN=false
